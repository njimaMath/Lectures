<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>第6回 補講メモ</title>

  <!-- Softer tone / relaxed magazine style -->
  <style>
    :root{
      --ink:#1a1a1a;
      --sub:#6b6b6b;
      --accent:#6b2e2e;
      --rule:#e8e7e5;
      --bg:#fffaf6;
      --card-bg:#ffffff;
      --serif: "Noto Serif JP","Yu Mincho","Hiragino Mincho ProN","Source Han Serif","MS PMincho",serif;
      --sans: "Noto Sans JP","Yu Gothic","Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --max: 820px;
      --radius: 12px;
      --gap: 16px;
    }

    html,body{
      background: var(--bg);
      color: var(--ink);
      margin:0;
      padding:0;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-family: var(--serif);
    }

    header{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85));
      box-shadow: 0 1px 0 rgba(19,19,19,0.03);
      position: sticky;
      top:0;
      z-index: 10;
      backdrop-filter: blur(3px);
    }
    .masthead{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px var(--gap);
      display:flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      font-family: var(--sans);
    }
    .brand{
      font-size: 16px;
      color: var(--accent);
      font-weight: 600;
      letter-spacing: 0.06em;
      background: linear-gradient(90deg, rgba(107,46,46,0.06), transparent);
      padding: 6px 10px;
      border-radius: 8px;
    }
    .section{
      font-size: 13px;
      color: var(--sub);
      padding: 6px 8px;
      border-radius: 8px;
      background: rgba(0,0,0,0.02);
      margin-left: auto;
    }

    main{
      max-width: var(--max);
      margin: 22px auto;
      padding: 20px var(--gap) 72px;
    }

    h1{
      font-family: var(--serif);
      font-size: 30px;
      line-height: 1.28;
      font-weight:700;
      margin: 6px 0 6px;
      color: var(--ink);
    }
    .dek{
      font-family: var(--sans);
      font-size: 15px;
      color: var(--sub);
      margin: 8px 0 14px;
    }
    .meta{
      font-family: var(--sans);
      font-size: 13px;
      color: var(--sub);
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom: 18px;
    }
    .meta div{ padding:6px 10px; background: rgba(0,0,0,0.02); border-radius:8px; }

    article{
      font-family: var(--serif);
      font-size: 17px;
      line-height: 1.9;
      color: var(--ink);
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.98));
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: 0 8px 20px rgba(16,16,16,0.03);
      border: 1px solid var(--rule);
    }

    p{ margin: 0 0 1.05em; }

    .lead{
      position: relative;
      padding-top: 4px;
    }
    .lead::first-letter{
      float:left;
      font-size: 36px;
      line-height: 1;
      padding-right: 8px;
      padding-top: 2px;
      font-family: var(--serif);
      font-weight: 700;
      color: var(--accent);
      background: rgba(107,46,46,0.04);
      border-radius: 6px;
      padding-left: 6px;
      padding-right: 6px;
      margin-right: 8px;
    }

    h2{
      font-family: var(--sans);
      font-size: 15px;
      font-weight: 700;
      color: rgba(0,0,0,0.92);
      margin: 24px 0 8px;
      padding-bottom: 6px;
      border-bottom: 1px dashed var(--rule);
    }

    .eq{
      text-align: center;
      margin: 14px auto;
      padding: 10px 16px;
      font-family: var(--serif);
      background: #fcfcfc;
      border: 1px solid var(--rule);
      border-radius: 8px;
      max-width: 640px;
    }

    .theorem{
      border-left: 4px solid var(--accent);
      background: #fff;
      padding: 14px 16px;
      margin: 16px 0;
      border-radius: 8px;
    }
    .theorem .label{
      font-family: var(--sans);
      font-size: 12px;
      font-weight:700;
      color: var(--accent);
      display:inline-block;
      margin-bottom:6px;
    }

    .note{
      font-family: var(--sans);
      font-size: 14px;
      color: var(--sub);
      padding-left:10px;
      margin: 8px 0 0;
    }

    .pull{
      font-family: var(--serif);
      font-size: 16px;
      line-height:1.9;
      color:#333;
      background: linear-gradient(90deg, rgba(107,46,46,0.03), rgba(0,0,0,0.01));
      padding:12px 14px;
      margin: 14px 0;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.03);
    }

    code, kbd, samp{
      font-family: var(--mono);
      font-size: .95em;
      background:#f6f6f6;
      padding:.12em .34em;
      border-radius:6px;
    }

    .footer-note{
      font-family: var(--sans);
      font-size: 13px;
      color: var(--sub);
      margin-top: 22px;
      padding-top: 12px;
      border-top: 1px dashed var(--rule);
    }

    .back-nav{
      display:flex;
      justify-content:flex-start;
      margin-bottom:16px;
    }

    .back-link{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-family: var(--sans);
      font-size:13px;
      font-weight:600;
      color: var(--accent);
      text-decoration:none;
      padding:6px 14px;
      border-radius:999px;
      border:1px solid rgba(107,46,46,0.28);
      background: rgba(107,46,46,0.06);
      transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
    }

    .back-link:hover{
      background: rgba(107,46,46,0.12);
      transform: translateY(-1px);
      box-shadow:0 8px 18px rgba(107,46,46,0.18);
    }

    @media (max-width:520px){
      h1{ font-size: 22px; }
      .masthead{ padding:10px; }
      main{ padding: 16px; }
      article{ padding: 16px; }
      .lead::first-letter{ font-size: 30px; }
    }

    @media print{
      header{ display:none; }
      body{ background: #fff; color: #000; }
      article{ box-shadow:none; border-radius:0; padding:0; border:none; }
    }
  </style>

  <!-- MathJax (use $...$ for inline, $$...$$ for display) -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\(', '\)']],
        displayMath: [['$$','$$'], ['\[','\]']],
        tags: 'none'
      },
      svg: {fontCache: 'global'}
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
  <header>
    <div class="masthead">
      <div class="brand">雑記・確率</div>
      <div class="section">補講</div>
    </div>
  </header>

  <main>
    <nav class="back-nav">
      <a class="back-link" href="../index.html">&larr; ホームに戻る</a>
    </nav>
    <h1>第6回 補講メモ</h1>
    <div class="meta">
      <div>寄稿：中島秀太</div>
      <div>更新日：2025年11月1日</div>
    </div>

    <article>
      <p class="lead">
        第 6 回では条件付き確率を土台に、全確率の法則・ベイズの定理・条件付き期待値がどのようにつながるかをまとめた。現象の細分類や情報の更新が、確率の再評価をどう変えるかに注目する。
      </p>

      <h2>1. 全確率の法則の再確認</h2>
      <p>
        まず標本空間を互いに排反な事象 <span class="math">$B_1,\dots,B_m$</span> で分割し、条件付き確率を積み上げる形で母集団の確率を回収する。
      </p>
      <div class="eq">
        \Pr(A)=\sum_{j=1}^m \Pr(A\mid B_j)\Pr(B_j),\qquad \bigcup_{j=1}^m B_j=\Omega,\;B_i\cap B_j=\varnothing.
      </div>
      <p>
        分割の選び方で計算負荷が変わる。観測データの分類や状態遷移の段階を意識して、扱いやすい基底事象を設けることが実務上のポイントだった。
      </p>

      <h2>2. ベイズ更新の流れ</h2>
      <p>
        観測結果 <span class="math">$A$</span> を得た後の事前確率 <span class="math">$\Pr(B_j)$</span> の更新を整理すると、ベイズの定理が得られる。
      </p>
      <div class="eq">
        \Pr(B_j\mid A)=\frac{\Pr(A\mid B_j)\Pr(B_j)}{\sum_{k=1}^m \Pr(A\mid B_k)\Pr(B_k)}.
      </div>
      <p>
        分母は全確率の法則、分子は「尤度×事前確率」。事前分布と尤度の役割分担を意識しながら、ポスターリオリの直感を養う。統計的な意思決定では、この更新を繰り返しながら意思決定を行う。
      </p>

      <h2>3. 条件付き期待値の位置づけ</h2>
      <p>
        条件付き期待値 <span class="math">$E[X\mid\mathcal{G}]$</span> は情報 <span class="math">$\mathcal{G}$</span> を与えられた際の「最適な予測器」。有限分割の場合は重み付き平均に帰着する。
      </p>
      <div class="eq">
        E[X\mid B_j]=\sum_i x_i\Pr(X=x_i\mid B_j),\qquad E[X]=\sum_{j=1}^m E[X\mid B_j]\Pr(B_j).
      </div>
      <p>
        ベイズ更新が確率を再評価するのに対し、条件付き期待値は期待値レベルで情報を反映させる操作になる点を比較した。
      </p>

      <h2>4. 例題：医療検査</h2>
      <p>
        感染率 <span class="math">$0.5\%$</span>、検査の真陽性率 <span class="math">$99\%$</span>、偽陽性率 <span class="math">$2\%$</span> を仮定し、陽性と判定された患者が実際に感染している確率を計算した。
      </p>
      <div class="eq">
        \Pr(\text{感染}\mid\text{陽性})=\frac{0.99\times0.005}{0.99\times0.005+0.02\times0.995}\approx0.199.
      </div>
      <p>
        事前確率が小さい場合、陽性判定でも実際の感染確率が 20% 程度に留まることが分かる。情報更新と意思決定のギャップを意識する例として扱った。
      </p>

      <h2>5. ランダム化試験との比較</h2>
      <p>
        グループをランダムに割り付ける実験では、ベイズ更新よりも条件付き期待値の方が解釈しやすい。ランダム化が独立性を保証し、平均処置効果が単純な差で評価できるからである。
      </p>
      <p class="note">情報が偏っている設定では、実験計画の段階でベイズ的な更新を想定した解析を準備しておく必要がある。</p>

      <h2>6. 次回へ向けたフォロー</h2>
      <p>
        予習課題として、条件付き期待値の塔の性質 <span class="math">$E[E[X\mid\mathcal{G}]\mid\mathcal{H}]=E[X\mid\mathcal{H}]$</span> を例題で確認しておく。演習時間にはマルコフ連鎖の遷移確率を用いたベイズ推定を扱う予定なので、状態空間の読み替えに慣れておこう。
      </p>

      <p class="footer-note">節の順番や例題は自由に入れ替えて構いません。自分のノートでは、他のデータセットやシミュレーション結果を適宜差し込みながら理解を深めてください。</p>
    </article>
  </main>
</body>
</html>
